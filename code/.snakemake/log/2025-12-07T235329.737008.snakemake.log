Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 3
Rules claiming more threads will be scaled down.
Job stats:
job                      count    min threads    max threads
---------------------  -------  -------------  -------------
all                          1              1              1
journal_formatting           1              1              1
journal_visualisation        1              1              1
list_download                1              1              1
total                        4              1              1

Select jobs to execute...

[Sun Dec  7 23:53:33 2025]
checkpoint list_download:
    output: ../data/raw/PMIDs/ID_batches
    jobid: 3
    reason: Missing output files: ../data/raw/PMIDs/ID_batches
    resources: tmpdir=/tmp
DAG of jobs will be updated after completion.


        mkdir -p ../data/raw/PMIDs
        bash 1-ID_list_downl.sh true "https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=%22gaming+disorder%22+OR+%22smartphone+addiction%22+OR+%22internet+addiction%22+OR+%22social+media+addiction%22&retmax=10000"
        
[Sun Dec  7 23:53:34 2025]
Finished job 3.
1 of 4 steps (25%) done
Select jobs to execute...

[Sun Dec  7 23:53:34 2025]
rule article_download:
    input: ../data/raw/PMIDs/ID_batches/batch_aa
    output: ../data/raw/Articles/artbatches/batch_aa.done
    jobid: 5
    reason: Missing output files: ../data/raw/Articles/artbatches/batch_aa.done
    wildcards: id=aa
    resources: tmpdir=/tmp


        mkdir -p ../data/raw/Articles/artbatches
        mkdir -p ../data/raw/Articles/individual
        bash 2-journal_downl.sh ../data/raw/PMIDs/ID_batches/batch_aa
        touch ../data/raw/Articles/artbatches/batch_aa.done
        
[Sun Dec  7 23:53:39 2025]
Finished job 5.
2 of 5 steps (40%) done
Select jobs to execute...

[Sun Dec  7 23:53:39 2025]
rule journal_formatting:
    input: ../data/raw/PMIDs/ID_batches, ../data/raw/Articles/artbatches/batch_aa.done
    output: ../data/clean/journal_data_cleaned.tsv
    jobid: 2
    reason: Missing output files: ../data/clean/journal_data_cleaned.tsv; Input files updated by another job: ../data/raw/Articles/artbatches/batch_aa.done
    resources: tmpdir=/tmp


        Rscript 3-journal_formatting.R ../data/raw/Articles ../data/clean/journal_data_cleaned.tsv
        
[Sun Dec  7 23:53:43 2025]
Finished job 2.
3 of 5 steps (60%) done
Select jobs to execute...

[Sun Dec  7 23:53:43 2025]
rule journal_visualisation:
    input: ../data/clean/journal_data_cleaned.tsv
    output: ../results/abstract_tsne_clustering.png
    jobid: 1
    reason: Missing output files: ../results/abstract_tsne_clustering.png; Input files updated by another job: ../data/clean/journal_data_cleaned.tsv
    resources: tmpdir=/tmp

RuleException in rule journal_visualisation in file /mnt/c/Users/mattg/summative/ADHS_assessment_code_2725312/code/Snakefile, line 44:
NameError: The name 'perplexity' is unknown in this context. Please make sure that you defined that variable. Also note that braces not used for variable access have to be escaped by repeating them, i.e. {{print $1}}, when formatting the following:

        mkdir -p ../results
        Rscript 4-journal_visualisation.R {output} {config[searchK]} {config[topicnumber]} {config[perplexity]}
        
